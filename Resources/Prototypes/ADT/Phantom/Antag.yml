- type: antag
  id: Phantom
  name: roles-antag-phantom-name
  antagonist: true
  setPreference: true
  objective: roles-antag-phantom-objective
  #requirements:
  #  - !type:DepartmentTimeRequirement
  #    department: Command
  #    time: 36000 #10 hrs
  #  - !type:DepartmentTimeRequirement
  #    department: Security
  #    time: 36000 #10 hrs
  #  - !type:DepartmentTimeRequirement
  #    department: Civilian
  #    time: 36000 #10 hrs
  #  - !type:OverallPlaytimeRequirement
  #    time: 180000 # 50h overall

- type: entity
  id: PhantomGameRule
  parent: BaseGameRule
  noSpawn: true
  components:
  - type: PhantomRule

- type: gamePreset
  id: Phantom
  alias:
    - phantom
    - ghosts
  name: phantom-title
  showInVote: true
  description: phantom-description
  rules:
    - PhantomGameRule
    - BasicRoundstartVariation
    - SubGamemodesRule
    - BasicStationEventScheduler

- type: entity
  abstract: true
  parent: BaseObjective
  id: BasePhantomObjective
  components:
  - type: Objective
    issuer: "Фантом"
  - type: RoleRequirement
    roles:
      components:
      - PhantomRole

- type: entity
  noSpawn: true
  parent: [BasePhantomObjective, BaseKillObjective]
  id: KillPhantomImmunePersonObjective
  description: phantom-kill-objective-desc
  components:
  - type: Objective
    difficulty: 1.75
    unique: false
    icon:
      sprite: Objects/Weapons/Guns/Pistols/viper.rsi
      state: icon
  - type: ObjectiveBlacklistRequirement
    blacklist:
      components:
      - SocialObjective
  - type: TargetObjective
    title: objective-condition-phantom-kill-person-title
  - type: PickPhantomImmunePerson
  - type: KillPhantomImmunePersonCondition

- type: entity
  noSpawn: true
  parent: [BasePhantomObjective, BaseSocialObjective]
  id: PhantomKeepAliveObjective
  description: phantom-keep-alive-objective-desc
  components:
  - type: Objective
    difficulty: 1.75
    unique: false
    icon:
      sprite: Objects/Weapons/Guns/Pistols/viper.rsi
      state: icon
  - type: TargetObjective
    title: objective-condition-phantom-alive-title
  - type: PickRandomPerson
  - type: KeepAliveCondition

- type: entity
  noSpawn: true
  parent: [BasePhantomObjective, BaseSocialObjective]
  id: PhantomMakeVesselObjective
  description: phantom-make-vessel-objective-desc
  components:
  - type: Objective
    difficulty: 1.75
    unique: false
    icon:
      sprite: Objects/Weapons/Guns/Pistols/viper.rsi
      state: icon
  - type: TargetObjective
    title: objective-condition-phantom-vessel-title
  - type: PickRandomPerson
  - type: MakeTargetVesselCondition

- type: entity
  noSpawn: true
  parent: [BasePhantomObjective, BaseLivingObjective]
  id: PhantomEscapeShuttleObjective
  name: phantom-escape-objective-name
  description: phantom-escape-objective-desc
  components:
  - type: Objective
    difficulty: 1.3
    icon:
      sprite: Structures/Furniture/chairs.rsi
      state: shuttle
  - type: EscapeShuttleCondition

- type: entity
  noSpawn: true
  parent: BasePhantomObjective
  id: PhantomStartNightmareObjective
  name: phantom-nightmare-objective-name
  description: phantom-nightmare-objective-desc
  components:
  - type: Objective
    difficulty: 1.75
    unique: false
    icon:
      sprite: Objects/Weapons/Guns/Pistols/viper.rsi
      state: icon
  - type: ObjectiveBlacklistRequirement
    blacklist:
      components:
      - SocialObjective
  - type: PhantomNightmareStartedCondition

- type: entity
  noSpawn: true
  parent: BasePhantomObjective
  id: PhantomReincarnateObjective
  name: phantom-reincarnate-objective-name
  description: phantom-reincarnate-objective-desc
  components:
  - type: Objective
    difficulty: 1.75
    unique: false
    icon:
      sprite: Objects/Weapons/Guns/Pistols/viper.rsi
      state: icon
  - type: ObjectiveBlacklistRequirement
    blacklist:
      components:
      - SocialObjective
  - type: PhantomReincarnateCondition

- type: weightedRandom
  id: PhantomObjectiveGroups
  weights:
    PhantomKillObjectives: 1
    PhantomSocialObjectives: 1

- type: weightedRandom
  id: PhantomKillObjectives
  weights:
    KillPhantomImmunePersonObjective: 1

- type: weightedRandom
  id: PhantomSocialObjectives
  weights:
    PhantomKeepAliveObjective: 1
    PhantomEscapeShuttleObjective: 1

- type: weightedRandom
  id: PhantomFinalObjectiveGroup
  weights:
    PhantomFinalObjectives: 1

- type: weightedRandom
  id: PhantomFinalObjectives
  weights:
    PhantomStartNightmareObjective: 1
    PhantomReincarnateObjective: 1

